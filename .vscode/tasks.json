{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Go: Build And Run Debug Binary",
      "type": "shell",
      "command": "go build -o ./tmp/main -gcflags=\"all=-N -l\" ./cmd/api && ./tmp/main",
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "showReuseMessage": false
      }
    },
    {
      "label": "Go: Apply Migrations",
      "type": "shell",
      "command": "export $(cat .env | xargs) && migrate -path=./migrations -database=$GREENLIGHT_DB_DSN up",
      "problemMatcher": [],
      "presentation": {
        "showReuseMessage": false
      }
    },
    {
      "label": "Go: Rollback All Migrations",
      "type": "shell",
      "command": "export $(cat .env | xargs) && migrate -path=./migrations -database=$GREENLIGHT_DB_DSN down",
      "problemMatcher": [],
      "presentation": {
        "showReuseMessage": false
      }
    }
  ]
}
